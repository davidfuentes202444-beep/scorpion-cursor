<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Escorpión Mecánico - GitHub Project</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; }
        canvas { display: block; }
    </style>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    // --- ESCENA Y CÁMARA ---
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Iluminación
    const light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.set(5, 10, 7.5).normalize();
    scene.add(light);
    scene.add(new THREE.AmbientLight(0x404040));

    // --- CONSTRUCCIÓN DEL ESCORPIÓN (EXTRA LARGO) ---
    const escorpion = new THREE.Group();
    const segmentos = [];
    const numSegmentos = 12; // Muy largo

    for (let i = 0; i < numSegmentos; i++) {
        const geo = new THREE.BoxGeometry(1.2, 0.7, 1);
        const mat = new THREE.MeshStandardMaterial({ color: 0x1a1a1a });
        const seg = new THREE.Mesh(geo, mat);
        
        seg.position.z = -i * 0.9;
        // Efecto de adelgazamiento hacia la cola
        const scale = 1 - (i * 0.06);
        seg.scale.set(scale, scale, 1);
        
        segmentos.push(seg);
        escorpion.add(seg);
    }
    scene.add(escorpion);

    // --- PATAS ARTICULADAS ---
    const patas = [];
    const numParesPatas = 4;

    function crearPata(lado, fila) {
        const articulacionPrincipal = new THREE.Group();
        
        // Muslo
        const musloGeo = new THREE.BoxGeometry(0.2, 1.5, 0.2);
        const muslo = new THREE.Mesh(musloGeo, new THREE.MeshStandardMaterial({color: 0x333333}));
        muslo.position.y = -0.5;
        
        // Pantorrilla
        const pantoGeo = new THREE.BoxGeometry(0.15, 1.5, 0.15);
        const panto = new THREE.Mesh(pantoGeo, new THREE.MeshStandardMaterial({color: 0x111111}));
        panto.position.y = -1.2;
        panto.rotation.z = 0.5 * lado;
        
        muslo.add(panto);
        articulacionPrincipal.add(muslo);
        
        // Posición inicial en el cuerpo largo
        articulacionPrincipal.position.set(0.8 * lado, 0, -fila * 1.1);
        articulacionPrincipal.rotation.z = -0.8 * lado;
        
        return { mesh: articulacionPrincipal, lado, fila };
    }

    for (let i = 1; i <= numParesPatas; i++) {
        patas.push(crearPata(1, i));  // Derecha
        patas.push(crearPata(-1, i)); // Izquierda
    }
    patas.forEach(p => escorpion.add(p.mesh));

    camera.position.set(8, 8, 8);
    camera.lookAt(0, 0, -5);

    // --- ANIMACIÓN DE CAMINATA REAL (SIN DESLIZAR) ---
    function animate() {
        requestAnimationFrame(animate);
        const time = Date.now() * 0.003;

        patas.forEach((pata) => {
            // Desfase para que camine alternado (gaits)
            const desfase = (pata.lado > 0) ? (pata.fila * 0.8) : (pata.fila * 0.8 + Math.PI);
            const ciclo = time + desfase;

            // Movimiento: Solo avanza cuando se levanta (No desliza)
            const elevacion = Math.max(0, Math.sin(ciclo)) * 0.6;
            const avance = Math.cos(ciclo) * 0.4;

            pata.mesh.position.y = elevacion;
            pata.mesh.rotation.x = avance; // Inclinación adelante/atrás
            pata.mesh.children[0].rotation.x = -elevacion; // Doblar rodilla
        });

        // Movimiento del cuerpo largo (ondulación)
        segmentos.forEach((seg, i) => {
            seg.rotation.y = Math.sin(time + i * 0.5) * 0.05;
            seg.position.y = Math.cos(time + i * 0.3) * 0.02;
        });

        renderer.render(scene, camera);
    }

    // Ajuste de ventana
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    animate();
</script>
</body>
</html>
